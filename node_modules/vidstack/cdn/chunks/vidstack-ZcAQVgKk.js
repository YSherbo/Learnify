import{j as o,s as n,l as i,e as a,p as c,i as h}from"./vidstack-CRB3Yunm.js";import{d as u}from"./vidstack-CMl-DYfo.js";function d(r,e=3e3){const t=o();return setTimeout(()=>{const s=r();s&&t.reject(s)},e),t}class l{constructor(e){this.Lb=e,this.sc=n(""),this.referrerPolicy=null,e.setAttribute("frameBorder","0"),e.setAttribute("aria-hidden","true"),e.setAttribute("allow","autoplay; fullscreen; encrypted-media; picture-in-picture; accelerometer; gyroscope"),this.referrerPolicy!==null&&e.setAttribute("referrerpolicy",this.referrerPolicy)}get iframe(){return this.Lb}setup(){i(window,"message",this.Xi.bind(this)),i(this.Lb,"load",this.gd.bind(this)),a(this.Mb.bind(this))}Mb(){const e=this.sc();if(!e.length){this.Lb.setAttribute("src","");return}const t=c(()=>this.mg());this.Lb.setAttribute("src",u(e,t))}se(e,t){this.Lb.contentWindow?.postMessage(JSON.stringify(e),t??"*")}Xi(e){const t=this.Nb();if((e.source===null||e.source===this.Lb?.contentWindow)&&(!h(t)||t===e.origin)){try{const s=JSON.parse(e.data);s&&this.te(s,e);return}catch{}e.data&&this.te(e.data,e)}}}export{l as E,d as t};
