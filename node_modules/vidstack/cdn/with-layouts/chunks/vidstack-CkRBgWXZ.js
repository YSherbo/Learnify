const h=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:\?hash=(.*))?/,i=new Map,n=new Map;function p(t){const o=t.match(h);return{videoId:o?.[1],hash:o?.[2]}}async function l(t,o){if(i.has(t))return i.get(t);if(n.has(t))return n.get(t);const a=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${t}`,s=window.fetch(a,{mode:"cors",signal:o.signal}).then(e=>e.json()).then(e=>{const d=/vimeocdn.com\/video\/(.*)?_/,c=e?.thumbnail_url?.match(d)?.[1],m=c?`https://i.vimeocdn.com/video/${c}_1920x1080.webp`:"",r={title:e?.title??"",duration:e?.duration??0,poster:m,pro:e.account_type!=="basic"};return i.set(t,r),r}).finally(()=>n.delete(t));return n.set(t,s),s}export{l as getVimeoVideoInfo,p as resolveVimeoVideoId};
