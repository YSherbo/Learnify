import { G as GroupedLog } from './chunks/vidstack-CNLrsPpJ.js';
export { L as List, m as mediaState, s as softResetMediaState } from './chunks/vidstack-CNLrsPpJ.js';
import { D as DOMEvent, i as isString, l as listenEvent, L as useState } from './chunks/vidstack-B11i_cNc.js';
export { P as appendTriggerEvent, O as findTriggerEvent, M as hasTriggerEvent, y as isKeyboardClick, R as isKeyboardEvent, Q as isPointerEvent, N as walkTriggerEventChain } from './chunks/vidstack-B11i_cNc.js';
import { T as Thumbnail, S as Slider } from './chunks/vidstack-BPJwxG0c.js';
export { A as ARIAKeyShortcuts, R as AirPlayButton, an as AudioGainRadioGroup, a9 as AudioGainSlider, r as AudioProviderLoader, al as AudioRadioGroup, q as AudioTrackList, X as CaptionButton, at as Captions, ao as CaptionsRadioGroup, ak as ChaptersRadioGroup, K as Controls, D as DASHProviderLoader, am as DEFAULT_AUDIO_GAINS, ap as DEFAULT_PLAYBACK_RATES, Z as FullscreenButton, g as FullscreenController, as as Gesture, U as GoogleCastButton, H as HLSProviderLoader, a1 as LiveButton, L as LocalMediaStorage, m as MEDIA_KEY_SHORTCUTS, J as MediaAnnouncer, l as MediaControls, d as MediaPlayer, c as MediaProvider, k as MediaRemoteControl, ae as Menu, M as MenuButton, ah as MenuItems, af as MenuPortal, _ as MuteButton, $ as PIPButton, W as PlayButton, P as Poster, ar as QualityRadioGroup, ab as QualitySlider, aj as Radio, ai as RadioGroup, j as ScreenOrientationController, a0 as SeekButton, ad as SliderChapters, a3 as SliderController, a6 as SliderPreview, a5 as SliderValue, a4 as SliderVideo, aq as SpeedRadioGroup, aa as SpeedSlider, o as TextRenderers, p as TextTrackList, av as ThumbnailsLoader, au as Time, ac as TimeSlider, Q as ToggleButton, N as Tooltip, O as TooltipContent, u as VideoProviderLoader, V as VideoQualityList, v as VimeoProviderLoader, a8 as VolumeSlider, Y as YouTubeProviderLoader, h as canFullscreen, e as formatSpokenTime, f as formatTime, w as isAudioProvider, z as isDASHProvider, E as isGoogleCastProvider, y as isHLSProvider, i as isHTMLAudioElement, b as isHTMLIFrameElement, G as isHTMLMediaElement, a as isHTMLVideoElement, x as isVideoProvider, n as isVideoQualitySrc, C as isVimeoProvider, B as isYouTubeProvider, ag as menuPortalContext, I as sliderContext, a2 as sliderState, s as sortVideoQualities, a7 as updateSliderPreviewPlacement } from './chunks/vidstack-BPJwxG0c.js';
export { g as getDownloadFile } from './chunks/vidstack-COCzjeeM.js';
export { T as TimeRange, b as getTimeRangesEnd, g as getTimeRangesStart } from './chunks/vidstack-NiSULkLR.js';
export { m as mediaContext, a as usePlyrLayoutClasses } from './chunks/vidstack-CUVgUi9M.js';
import { a as TextTrackSymbol } from './chunks/vidstack-CzvK2UwB.js';
export { T as TextTrack, f as findActiveCue, b as isCueActive, i as isTrackCaptionKind, p as parseJSONCaptionsFile, w as watchActiveTextTrack, c as watchCueTextChange } from './chunks/vidstack-CzvK2UwB.js';
export { C as ControlsGroup, T as TooltipTrigger } from './chunks/vidstack-BEFqUV5_.js';
export { M as MenuItem } from './chunks/vidstack-CJAQyhUi.js';
export { A as AUDIO_EXTENSIONS, l as AUDIO_TYPES, D as DASH_VIDEO_EXTENSIONS, o as DASH_VIDEO_TYPES, H as HLS_VIDEO_EXTENSIONS, n as HLS_VIDEO_TYPES, V as VIDEO_EXTENSIONS, m as VIDEO_TYPES, e as canChangeVolume, d as canGoogleCastSrc, f as canOrientScreen, g as canPlayHLSNatively, k as canRotateScreen, h as canUsePictureInPicture, j as canUseVideoPresentation, i as isAudioSrc, q as isDASHSrc, p as isHLSSrc, r as isMediaStream, a as isVideoSrc } from './chunks/vidstack-BnqIpPdq.js';
import './chunks/vidstack-VrKElWm_.js';
import './chunks/vidstack-BSXZsAhp.js';
import './chunks/vidstack-DM_McBs5.js';
import './chunks/vidstack-ksPACRiU.js';

class Logger {
  constructor() {
    this.G = null;
  }
  error(...data) {
    return this.dispatch("error", ...data);
  }
  warn(...data) {
    return this.dispatch("warn", ...data);
  }
  info(...data) {
    return this.dispatch("info", ...data);
  }
  debug(...data) {
    return this.dispatch("debug", ...data);
  }
  errorGroup(title) {
    return new GroupedLog(this, "error", title);
  }
  warnGroup(title) {
    return new GroupedLog(this, "warn", title);
  }
  infoGroup(title) {
    return new GroupedLog(this, "info", title);
  }
  debugGroup(title) {
    return new GroupedLog(this, "debug", title);
  }
  setTarget(newTarget) {
    this.G = newTarget;
  }
  dispatch(level, ...data) {
    return this.G?.dispatchEvent(
      new DOMEvent("vds-log", {
        bubbles: true,
        composed: true,
        detail: { level, data }
      })
    ) || false;
  }
}

class LibASSTextRenderer {
  constructor(loader, config) {
    this.loader = loader;
    this.config = config;
    this.priority = 1;
    this.d = null;
    this.J = null;
    this.Zf = /(ssa|ass)$/;
  }
  canRender(track, video) {
    return !!video && !!track.src && (isString(track.type) && this.Zf.test(track.type) || this.Zf.test(track.src));
  }
  attach(video) {
    if (!video)
      return;
    this.loader().then(async (mod) => {
      this.d = new mod.default({
        ...this.config,
        video,
        subUrl: this.J?.src || ""
      });
      listenEvent(this.d, "ready", () => {
        const canvas = this.d?.Nm;
        if (canvas)
          canvas.style.pointerEvents = "none";
      });
      listenEvent(this.d, "error", (event) => {
        if (this.J) {
          this.J[TextTrackSymbol.ma] = 3;
          this.J.dispatchEvent(
            new DOMEvent("error", {
              trigger: event,
              detail: event.error
            })
          );
        }
      });
    });
  }
  changeTrack(track) {
    if (!track || track.readyState === 3) {
      this._f();
    } else if (this.J !== track) {
      this.d?.setTrackByUrl(track.src);
      this.J = track;
    }
  }
  detach() {
    this._f();
  }
  _f() {
    this.d?.freeTrack();
    this.J = null;
  }
}

class SliderThumbnail extends Thumbnail {
  onAttach(el) {
    this.ia = useState(Slider.state);
  }
  uh() {
    const { duration, clipStartTime } = this.a.$state;
    return clipStartTime() + this.ia.pointerRate() * duration();
  }
}

export { LibASSTextRenderer, Logger, Slider, SliderThumbnail, Thumbnail };
